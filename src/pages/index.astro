---
import Experience from "../components/Experience.astro";
import Skills from "../components/Skills.astro";
import Education from "../components/Education.astro";
import About from "../components/About.astro";
import Projects from "../components/Projects.astro";
import Awards from "../components/Awards.astro";
import Hobbies from "../components/Hobbies.astro";
import Publications from "../components/Publications.astro";
import Academic from "../components/AcademicProject.astro";
import PersonalProject from "../components/PersonalProject.astro";
import "../styles/global.css";
import profileImg from '/profile.png';
---
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mostafizur Rahman | Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  </head>
  <body class="font-sans bg-gray-100 text-gray-800">
    <div class="flex flex-col md:flex-row min-h-screen">
      
      <!-- Sidebar -->
        <aside class="bg-babyblue p-6 flex flex-col justify-between w-full md:w-[260px] lg:w-[350px] md:sticky md:top-0 md:h-screen">
        <img 
        src={profileImg.src} 
        alt="Mostafizur Rahman" 
        class="w-44 h-44 rounded-full object-cover border-4 border-white shadow-lg mb-6"/>

        <h1 class="text-3xl font-bold mb-2">Mostafizur Rahman</h1>
        <h2 class="text-xl text-gray-600 mb-6">Sr Software Engineer</h2>
      
        <nav class="space-y-4">
          <a href="#about" class="block text-gray-700 font-medium transition-all duration-300" id="link-about">About</a>
          <a href="#experience" class="block text-gray-700 font-medium transition-all duration-300" id="link-experience">Experience</a>  
          <a href="#projects" class="block text-gray-700 font-medium transition-all duration-300" id="link-projects">Projects</a> 
          <a href="#skills" class="block text-gray-700 font-medium transition-all duration-300" id="link-skills">Skills</a>
          <a href="#education" class="block text-gray-700 font-medium transition-all duration-300" id="link-education">Education</a> 
          <a href="#publications" class="block text-gray-700 font-medium transition-all duration-300" id="link-publications">Publications</a> 
          <a href="#awards" class="block text-gray-700 font-medium transition-all duration-300" id="link-awards">Awards</a> 
          <a href="#hobbies" class="block text-gray-700 font-medium transition-all duration-300" id="link-hobbies">Hobbies</a> 
          <a href="#contact" class="block text-gray-700 font-medium transition-all duration-300" id="link-contact">Contact</a> 
        </nav>
      
        <footer class="mt-auto text-gray-600 text-sm">
          <p>&copy; 2025 Mostafizur Rahman</p>
        </footer>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 p-4 md:p-8 overflow-auto bg-white text-gray-800 mx-auto">
        <div class="max-w-5xl mx-auto">
        <About/>
        <Experience/>

        <section id="projects" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Projects</h2>
            
            <!-- Industry Projects -->
            <div class="mb-10">
              <h3 class="text-xl font-semibold text-blue-700 mb-4">Commercial Projects</h3>
              <div class="grid md:grid-cols-2 gap-6">
                <Projects title="SmartThings for Windows" description="SmartThings for Galaxy devices"  />
                <Projects title="Camera Plugin for SmartThings" description="Stream from your cameras"  />
                <Projects title="CameraShare" description="Use your Galaxy phone as a webcam"  />
              </div>
            </div>

            <!-- Personal Project -->
            <div>
              <h3 class="text-xl font-semibold text-blue-700 mb-4">Personal Projects</h3>
              <div class="grid md:grid-cols-2 gap-6 mb-12">
                <PersonalProject/>
              </div>
            </div>
          
            <!-- Academic Projects -->
            <div>
              <h3 class="text-xl font-semibold text-blue-700 mb-4">Academic Projects</h3>
              <div class="grid md:grid-cols-1 gap-6">
                <Academic/>
              </div>
            </div>
          </section>
          
        <Skills/>
        <Education/>
        <Publications/>
        <Awards/>
        <Hobbies/>
    
        <section id="contact">
          <h2 class="text-2xl font-bold mb-4">Contact</h2>
          <p>Email: akrahman76@gmail.com</p>
        </section>
      </div>
      </main>
    </div>
  </body>
</html>

<script is:global>
  const sections = document.querySelectorAll("section[id]");
  const navLinks = document.querySelectorAll("nav a");

  function activateLink(id) {
    navLinks.forEach(link => {
      if (link.getAttribute("href") === `#${id}`) {
        link.classList.add("text-xl", "font-bold");
      } else {
        link.classList.remove("text-xl", "font-bold");
      }
    });
  }

  const observer = new IntersectionObserver(
    entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          activateLink(entry.target.id);
        }
      });
    },
    { threshold: 0.6 }
  );

  sections.forEach(section => observer.observe(section));
</script>

